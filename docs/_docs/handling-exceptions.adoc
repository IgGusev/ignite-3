// Licensed to the Apache Software Foundation (ASF) under one or more
// contributor license agreements.  See the NOTICE file distributed with
// this work for additional information regarding copyright ownership.
// The ASF licenses this file to You under the Apache License, Version 2.0
// (the "License"); you may not use this file except in compliance with
// the License.  You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

= Exceptions

This section outlines basic exceptions that can be generated by Ignite 3 and provides basic instructions for handling them.

== Finding Stack Trace Information

When the exception happens, Apache Ignite 3 provides a UUID of the specific exception, but not a full stack trace. For a full stack trace, check cluster logs.

== Common Exceptions

[cols="20%,80%", width="100%"]
|===
|Exception	|Description
|`UNEXPECTED_ERR`|Unexpected error occurred.
|`NODE_STOPPING_ERR`|An error occurred when stopping the node.
|`COMPONENT_NOT_STARTED_ERR`|Required component was not started.
|`UNKNOWN_ERR`|Deprecated. Unknown error occurred. Replaced by `UNEXPECTED_ERR`.
|===

== Table Exceptions

[cols="20%,80%", width="100%"]
|===
|Exception	|Description
|`TABLE_ALREADY_EXISTS_ERR`|Table already exists.
|`TABLE_NOT_FOUND_ERR`|Table not found.
|`COLUMN_ALREADY_EXISTS_ERR`|Column already exists.
|`COLUMN_NOT_FOUND_ERR`|Column not found.
|===

== Client Exceptions

[cols="20%,80%", width="100%"]
|===
|Exception	|Description
|`CONNECTION_ERR`|Connection to client failed.
|`PROTOCOL_ERR`|An issue happened with connection protocol.
|`PROTOCOL_COMPATIBILITY_ERR`|Incompatible protocol version.
|`TABLE_ID_NOT_FOUND_ERR`|Table not found by ID.
|`AUTHENTICATION_ERR`|An error with authentication parameters.
|`AUTHORIZATION_ERR`|An error occurred during server authorization.
|`CONFIGURATION_ERR`|An error occurred while reading client configuration.
|===

== SQL  Exceptions

[cols="20%,80%", width="100%"]
|===
|Exception	|Description
|`CURSOR_NO_MORE_PAGES_ERR`|Ignite tried to read a page after last one.
|`SESSION_NOT_FOUND_ERR`|The specified either does not exist or is closed.
|`QUERY_INVALID_ERR`|SQL query is incorrect.
|`QUERY_NO_RESULT_SET_ERR`|Query returned no result set.
|`PRIMARY_KEY_MISSING_ERR`|Table is missing primary key.
|`PRIMARY_KEYS_MULTIPLE_ERR`|Multiple primary keys found in a table.
|`SCHEMA_NOT_FOUND_ERR`|Failed to find schema.
|`STORAGE_ENGINE_NOT_VALID_ERR`|Specified storage engine is not supperted.
|`CURSOR_CLOSED_ERR`|Cursor is already closed when another operation starts.
|`DUPLICATE_KEYS_ERR`|Some keys could not be inserted because they are duplicates.
|===

== Meta Storage Exceptions

[cols="20%,80%", width="100%"]
|===
|Exception	|Description
|`STARTING_STORAGE_ERR`|Failed to start the underlying key value storage.
|`RESTORING_STORAGE_ERR`|Failed to restore the underlying key value storage.
|`CLOSING_STORAGE_ERR`|Failed to close the underlying key value storage.
|`COMPACTION_ERR`|Failed to compact the underlying key value storage.
|`OP_EXECUTION_ERR`|Failed to perform an operation on the underlying key value storage.
|`OP_EXECUTION_TIMEOUT_ERR`|Failed to perform an operation within a specified time period. Usually in such cases the operation should be retried.
|`WATCH_EXECUTION_ERR`|Failed to iterate over the underlying key value storage.
|`WATCH_STOPPING_ERR`|Failed to stop a watcher.
|`DEPLOYING_WATCH_ERR`|Failed to deploy or update a watcher.
|`CURSOR_EXECUTION_ERR`|Failed to iterate over meta storage cursor.
|`CURSOR_CLOSING_ERR`|Failed to close a cursor.
|===

== Index Exceptions

[cols="20%,80%", width="100%"]
|===
|Exception	|Description
|`INVALID_INDEX_DEFINITION_ERR`|Invalid index definition.
|`INDEX_NOT_FOUND_ERR`|Failed to find the specified index.
|===

== Transactions Exceptions

[cols="20%,80%", width="100%"]
|===
|Exception	|Description
|`TX_STATE_STORAGE_CREATE_ERR`|Failed to create a transaction state storage.
|`TX_STATE_STORAGE_DESTROY_ERR`|Failed to destroy the transaction state storage.
|`TX_STATE_STORAGE_ERR`|Failed to work with the transaction state storage.
|`TX_STATE_STORAGE_STOPPED_ERR`|Transaction state storage is stopped when a different operation is planned.
|===