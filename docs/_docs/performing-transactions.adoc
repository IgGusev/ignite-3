= Performing Transactions

== Executing Transactions

The key-value API provides an interface for starting and completing transactions. Use the `igniteTransactions` class to create a transaction object and the `commit` method to send it.

[tabs]
--
tab:Java[]
[source,java]
----
Transaction tx = igniteTransactions.begin();
tx.commit()
----
--


== Asynchronous Transactions

You can also perform transactions asynchronously.

[tabs]
--
tab:Java[]
[source,java]
----
protected Table accounts;
protected Table customers;

accounts.recordView().upsert(null, makeValue(1, BALANCE_1));
accounts.recordView().upsert(null, makeValue(2, BALANCE_2));

igniteTransactions.beginAsync()
    .thenCompose(tx -> accounts.recordView().getAsync(tx, makeKey(1))
        .thenCombine(accounts.recordView().getAsync(tx, makeKey(2)), (v1, v2) -> new Pair<>(v1, v2))
        .thenCompose(pair -> allOf(
            accounts.recordView().upsertAsync(
                tx, makeValue(1, pair.getFirst().doubleValue("balance") - DELTA)),
                accounts.recordView().upsertAsync(
                tx, makeValue(2, pair.getSecond().doubleValue("balance") + DELTA))
        )
        .thenApply(ignored -> tx)
        )
    ).thenCompose(Transaction::commitAsync).join();
----
--